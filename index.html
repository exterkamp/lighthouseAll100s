<!doctype html>
<html lang="en">
    <head>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-124170035-1"></script>
        <!-- Some structured data about Person: Shane Exterkamp -->
        <script type="application/ld+json">
        {
            "@context": "http://schema.org",
            "@type": "Person",
            "name": "Shane Exterkamp",
            "description": "American software engineer.",
            "jobTitle": "Software Engineer",
            "birthDate": "1994-03-21",
            "alumniOf": {
            "@type": "EducationalOrganization",
            "name": "University of Florida"
            },
            "url": "https://exterkamp.codes",
            "sameAs": [
            "https://www.facebook.com/shane.exterkamp",
            "https://github.com/exterkamp",
            "https://www.linkedin.com/in/shane-exterkamp/"
            ]
        }
        </script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta name="theme-color" content="#edf1f3">
        <meta name="Description" content="The homepage of Shane Exterkamp.">
        <link rel="manifest" href="manifest.json">
        <link rel="shortcut icon" href="favicon.ico">
        <title>Shane Exterkamp</title>

        <!-- styles -->
        <link rel="stylesheet" href="styles/index.css">
    </head>
    <body>
        <main style="text-align: center;">
            <img id="portrait" alt="dithered portrait" src="static/img/headshot_dithered_transparent.png">
            <div class="hero-text">
                <div class="hero-name">
                    Shane Exterkamp
                </div>
            </div>
            <div >
                <p class="history-text">
                    <span style="display: inline-block;"><span class="goog-blue bold">G</span><span class="goog-red bold">o</span><span class="goog-yellow bold">o</span><span class="goog-blue bold">g</span><span class="goog-green bold">l</span><span class="goog-red bold">e</span></span> engineer & <span style="display: inline-block;"><span class="uf-orange bold">U</span><span class="uf-blue bold">F</span></span> Alumni
                </p>
            </div>
            <div>
                <a class="icon" target="_blank" rel="noopener noreferrer" href="mailto:shane@exterkamp.codes"><img src="static/svg/baseline-alternate_email-24px.svg" alt="email link"></a>
                <a class="icon" target="_target" href="static/resume.pdf"><img src="static/svg/baseline-picture_as_pdf-24px.svg" alt="resume link"></a>
                <a class="icon icon-left-border" target="_blank" rel="noopener noreferrer" href="https://github.com/exterkamp"><img src="static/svg/github-icon-1.svg" alt="github link"></a>
                <a class="icon" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/shane-exterkamp"><img src="static/svg/linkedin-icon-1.svg" alt="linkedin link"></a>
                <a class="icon" target="_blank" rel="noopener noreferrer" href="http://facebook.com/shane.exterkamp"><img src="static/svg/facebook-icon-1.svg" alt="facebook link"></a>
            </div>
            <div id="spotify-header"></div>
            <div id="spotify-container" style="display:flex;justify-content:center;"></div>
            <div id="spotify-footer"></div>
        </main>
        <footer>
            <p>
                Handcrafted artisanal &#60;/HTML&#62; just for you.
            </p>
        </footer>
        <template id="spotify-track">
            <div class="spotify-track">
                <div class="album-hover-target" style="position: relative;width: 150px;height: 150px;">
                    <div class="spotify-album-paper">
                        <div class="spotify-song" style="margin-top:45px;"></div>
                        <div class="spotify-album"></div>
                        <div class="spotify-artist"></div>
                    </div>
                    <a class="spotify-link" target="_blank" rel="noopener noreferrer">
                        Play on Spotify<img src="static/svg/Spotify_logo_without_text.svg" alt="spotify link"  style="position: absolute;right: 0;">
                    </a>
                    <img class="spotify-album-img" />
                </div>
                
            </div>
        </template>
    <script>
        // Check that service workers are registered
        if ('serviceWorker' in navigator) {
            // Use the window load event to keep the page load performant
            window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js');
            });
        }
    </script>
    <script>
        // Load in the spotify scripts from app-engine!
        httpRequest = new XMLHttpRequest();
        function addSpotifyElements(){
            if (httpRequest.readyState === XMLHttpRequest.DONE) {
                // Everything is good, the response was received.
                if (httpRequest.status === 200) {
                    spotify_json = JSON.parse(httpRequest.responseText)
                    // console.log(spotify_json)
                    let update_time = new Date(parseInt(spotify_json['update_time']))
                        .toLocaleDateString("en-US", {weekday: 'long', hour: 'numeric', minute: 'numeric'});
                    document.querySelector('#spotify-header').innerHTML =
                        `Like music?  Here's what I'm listening to right now:`;
                    document.querySelector('#spotify-footer').innerHTML =
                        `(Updated: ${update_time})`;
                    for (var idx in spotify_json['tracks']){
                        let track = spotify_json['tracks'][idx]
                        var t = document.querySelector('#spotify-track');
                        var container = document.querySelector("#spotify-container");
                        var clone = document.importNode(t.content, true);
                        clone.querySelector('.spotify-song').innerHTML = track.name
                        clone.querySelector('.spotify-album').innerHTML = track.album
                        clone.querySelector('.spotify-artist').innerHTML = "by " + track.artists.map(x => x.name).reduce((x, y) => x + " & " + y)
                        clone.querySelector('.spotify-link').setAttribute("href", track.spotify_url);
                        var albumImg = clone.querySelector('.spotify-album-img');
                        albumImg.setAttribute("src","data:image/jpg;base64," + track.album_art_encoded);
                        albumImg.setAttribute("alt","Album cover for: " + track.album);
                        container.appendChild(clone);
                    }
                }
            }
        }
        httpRequest = new XMLHttpRequest();
        httpRequest.open('GET', 'https://develop-208819.appspot.com/getRecents', true);
        httpRequest.onreadystatechange = addSpotifyElements;
        httpRequest.send();
    </script>
    </body>
</html>